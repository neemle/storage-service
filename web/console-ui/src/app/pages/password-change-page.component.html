<div class="page page-login">
  <mat-card class="login-card">
    <div class="login-header">
      <div class="login-icon"><mat-icon>lock_reset</mat-icon></div>
      <mat-card-title>Change Password</mat-card-title>
      <mat-card-subtitle>You must change your password to continue</mat-card-subtitle>
    </div>
    <form class="login-form" (submit)="app.handleChangePassword(); $event.preventDefault()">
      <mat-form-field appearance="outline">
        <mat-label>Current password</mat-label>
        <input
          matInput
          type="password"
          [value]="app.currentPassword()"
          #curPwd
          (input)="app.currentPassword.set(curPwd.value)"
          autocomplete="current-password"
          />
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>New password</mat-label>
        <input
          matInput
          type="password"
          [value]="app.newPasswordInput()"
          #newPwd
          (input)="app.newPasswordInput.set(newPwd.value)"
          autocomplete="new-password"
          />
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>Confirm new password</mat-label>
        <input
          matInput
          type="password"
          [value]="app.confirmPassword()"
          #confPwd
          (input)="app.confirmPassword.set(confPwd.value)"
          autocomplete="new-password"
          />
      </mat-form-field>
      <button mat-raised-button color="primary" type="submit" [disabled]="app.passwordChanging()">
        {{ app.passwordChanging() ? 'Changing...' : 'Change Password' }}
      </button>
      @if (app.passwordChangeError()) {
        <div class="error-msg">{{ app.passwordChangeError() }}</div>
      }
    </form>
  </mat-card>
</div>
