
running 161 tests
test api::admin::tests::admin_repo_failures_return_internal_errors ... ok
test api::admin::tests::create_user_rejects_invalid_token ... ok
test api::admin::tests::list_users_and_nodes_include_expected_fields ... ok
test api::admin::tests::login_reports_repo_and_auth_errors ... ok
test api::admin::tests::parse_ts_handles_invalid_input ... ok
test api::admin::tests::update_delete_and_list_nodes_error_paths ... ok
test api::admin_storage::tests::bucket_volume_binding_flow_and_validation ... ok
test api::admin_storage::tests::create_backup_policy_handler_reports_missing_backup_bucket ... ok
test api::admin_storage::tests::create_backup_policy_reports_missing_replica_node ... ok
test api::admin_storage::tests::export_backup_run_maps_backup_lookup_error ... ok
test api::admin_storage::tests::list_snapshot_and_backup_policies_map_repo_errors ... ok
test api::admin_storage::tests::restore_and_export_return_not_found_for_missing_records ... ok
test api::admin_storage::tests::run_export_and_target_handlers_require_auth ... ok
test api::admin_storage::tests::update_backup_policy_validates_payload_inside_handler ... ok
test api::admin_storage::tests::validate_external_targets_rejects_invalid_endpoint ... ok
test api::auth::tests::helper_cookies_use_requested_name ... ok
test api::console::tests::audit_record_errors_are_reported ... ok
test api::console::tests::bucket_and_object_flow ... ok
test api::console::tests::clear_oidc_cookies_replaces_values ... ok
test api::console::tests::ensure_bucket_mutable_rejects_worm_buckets ... ok
test api::console::tests::get_object_download_url_for_private_bucket_uses_presign ... ok
test api::console::tests::list_buckets_reports_capacity_lookup_error ... ok
test api::console::tests::login_fails_for_inactive_user ... ok
test api::console::tests::login_reports_repo_and_hash_errors ... ok
test api::console::tests::oidc_callback_maps_user_and_token_errors ... ok
test api::console::tests::oidc_start_success_sets_transient_cookies ... ok
test api::console::tests::resolve_s3_endpoint_handles_host_with_port ... ok
test api::console::tests::resolve_signing_key_reports_auto_create_errors ... ok
test api::console::tests::update_bucket_rejects_invalid_versioning_status ... ok
test api::console::tests::update_object_noop_on_same_key ... ok
test api::internal::tests::chunk_handlers_cover_error_and_success_paths ... ok
test api::internal::tests::heartbeat_requires_internal_auth ... ok
test api::internal::tests::join_cluster_reports_repo_and_node_errors ... ok
test api::internal::tests::put_chunk_requires_checksum_value ... ok
test api::master::tests::build_servers_rejects_invalid_secondary_listeners ... ok
test api::master::tests::ready_handler_reports_db_unavailable ... ok
test api::portal::tests::accepts_encoding_ignores_non_quality_parameters ... ok
test api::portal::tests::content_type_for_additional_extensions_and_defaults ... ok
test api::portal::tests::embedded_ui_reports_missing_index ... ok
test api::portal::tests::encoding_allowed_accepts_token_without_quality ... ok
test api::portal::tests::router_builds_with_cors_and_ui_dir ... ok
test api::replica::tests::build_servers_rejects_invalid_listen ... ok
test api::replica::tests::join_cluster_handles_error_response ... ok
test api::replica::tests::join_with_retries_reports_failure_after_exhaustion ... ok
test api::replica::tests::ready_handler_reports_ok_without_master ... ok
test api::replica::tests::sync_replica_mode_ignores_unknown_sub_mode ... ok
test api::tests::app_state_new_reports_dependency_errors ... ok
test api::tests::ensure_local_node_creates_when_missing ... ok
test api::tests::refresh_local_node_capacity_tolerates_broken_repo ... ok
test api::tests::repo_clone_uses_same_pool ... ok
test api::volume_capacity::tests::load_context_from_repo_maps_lookup_errors ... ok
test auth::oidc::tests::authorization_url_rejects_invalid_authorization_endpoint ... ok
test auth::oidc::tests::claim_path_supports_nested_values ... ok
test auth::oidc::tests::exchange_code_rejects_unsupported_signing_algorithm ... ok
test auth::oidc::tests::exchange_code_reports_missing_jwk_kid ... ok
test auth::oidc::tests::extract_identity_falls_back_to_name_claim ... ok
test auth::oidc::tests::resolve_username_falls_back_to_subject ... ok
test auth::password::tests::hash_and_verify_roundtrip ... ok
test auth::token::tests::issue_rejects_invalid_algorithm ... ok
test backup::tests::archive_storage_and_checksum_helpers_report_error_paths ... ok
test backup::tests::build_signed_s3_put_client_build_failpoint ... ok
test backup::tests::complete_backup_run_reports_run_and_touch_errors ... ok
test backup::tests::external_target_connection_reports_parse_and_host_errors ... ok
test backup::tests::in_memory_writer_fail_modes_cover_gzip_paths ... ok
test backup::tests::parse_external_targets_rejects_duplicate_names ... ok
test backup::tests::parse_external_targets_validates_s3_kind_fields ... ok
test backup::tests::prune_backup_run_deletes_run_without_archive_object_key ... ok
test backup::tests::resolve_target_url_appends_object_key_when_endpoint_is_directory ... ok
test backup::tests::run_backup_policy_once_rejects_non_worm_and_invalid_type ... ok
test backup::tests::schedule_due_checks_windows ... ok
test backup::tests::target_connectivity_covers_sftp_ssh_success_and_http_headers ... ok
test backup::tests::test_s3_target_connection_server_error_returns_err ... ok
test backup::tests::upload_glacier_target_success_returns_ok ... ok
test backup::tests::upload_s3_target_success_returns_ok ... ok
test backup::tests::write_chunk_and_snapshot_archive_helpers_cover_error_paths ... ok
test cache::tests::memory_cache_incr_resets_after_ttl ... ok
test cache::tests::redis_cache_roundtrip ... ok
test events::tests::publish_with_failpoint_accepts_open_channel ... ok
test events::tests::wait_publish_confirm_maps_future_errors ... ok
test jobs::tests::gc_once_handles_empty_orphans ... ok
test jobs::tests::repair_chunk_adds_missing_replica ... ok
test jobs::tests::repair_chunk_reports_list_nodes_error ... ok
test jobs::tests::repair_queue_tracks_items ... ok
test jobs::tests::run_snapshot_policies_once_handles_change_policy ... ok
test jobs::tests::schedulers_run_periodic_ticks ... ok
test jobs::tests::should_run_snapshot_policy_daily_uses_due_check ... ok
test meta::backup_repos::tests::backup_policy_update_maps_update_error ... ok
test meta::backup_repos::tests::create_bucket_from_snapshot_maps_snapshot_object_lookup_error ... ok
test meta::backup_repos::tests::lookup_paths_cover_nodes_and_buckets ... ok
test meta::backup_repos::tests::snapshot_and_restore_paths_work ... ok
test meta::db::tests::resolve_dsn_host_handles_various_inputs ... ok
test meta::db::tests::resolve_dsn_host_with_lookup_rewrites_first_address ... ok
test meta::migrate::tests::load_migrator_reports_missing_directory ... ok
test meta::migrate::tests::repair_and_retry_reports_missing_v4_migration ... ok
test meta::migrate::tests::run_migrations_succeeds ... ok
test meta::repos::tests::complete_multipart_upload_reports_error ... ok
test meta::repos::tests::create_manifest_error_paths ... ok
test meta::repos::tests::delete_object_version_reports_current_update_error ... ok
test meta::repos::tests::delete_object_version_reports_manifest_lookup_error ... ok
test meta::repos::tests::finalize_object_version_error_paths ... ok
test meta::repos::tests::multipart_and_cleanup_paths ... ok
test meta::repos::tests::update_chunk_replica_state_reports_error ... ok
test obs::tests::metrics_layer_records_route_service_requests ... ok
test s3::chunking::tests::drain_full_chunks_noop_when_too_small ... ok
test s3::sigv4::tests::authenticate_request_presigned_and_repo_errors ... ok
test s3::sigv4::tests::authenticate_request_rejects_inactive_user ... ok
test s3::sigv4::tests::authenticate_request_rejects_unknown_and_inactive ... ok
test s3::sigv4::tests::handle_s3_failure_rate_limits ... ok
test s3::sigv4_core::tests::canonical_headers_normalizes_whitespace ... ok
test s3::sigv4_core::tests::parse_amz_date_accepts_offsets_and_z ... ok
test s3::sigv4_core::tests::parse_authorization_defaults_unsigned_payload_for_get ... ok
test s3::sigv4_core::tests::parse_authorization_rejects_missing_signed_headers ... ok
test s3::sigv4_core::tests::parse_presigned_rejects_missing_date ... ok
test s3::sigv4_core::tests::presign_url_includes_signature_and_host ... ok
test s3::tests::bucket_dispatch_invalid_methods_return_invalid_request ... ok
test s3::tests::build_object_response_reports_manifest_error ... ok
test s3::tests::complete_multipart_upload_rejects_mismatched_key ... ok
test s3::tests::delete_object_reports_finalize_error ... ok
test s3::tests::delete_objects_invalid_xml_returns_error ... ok
test s3::tests::dispatch_rejects_oversized_bucket_bodies ... ok
test s3::tests::get_and_head_object_version_cover_etag_headers ... ok
test s3::tests::handle_get_bucket_access_denied ... ok
test s3::tests::handle_get_bucket_uploads_repo_error ... ok
test s3::tests::handle_object_rejects_invalid_version_and_upload_requests ... ok
test s3::tests::list_objects_v2_dispatches_listing ... ok
test s3::tests::multipart_handlers_reject_existing_object_for_worm_bucket ... ok
test s3::tests::parse_range_header_rejects_invalid_end ... ok
test s3::tests::path_handler_requires_auth_for_private_bucket ... ok
test s3::tests::put_object_reports_stream_error ... ok
test s3::tests::root_handler_rejects_missing_auth ... ok
test s3::tests::stream_body_to_chunks_handles_empty_body ... ok
test s3::tests::upload_part_error_paths_cover_branches ... ok
test s3::xml::tests::bucket_versioning_formats_states ... ok
test s3::xml::tests::multipart_and_delete_helpers_emit_xml ... ok
test storage::checksum::tests::checksum_verify_crc32c ... ok
test storage::chunk_encryption::tests::chunk_encryption_roundtrip_uses_envelope ... ok
test storage::chunk_encryption::tests::load_chunk_encryption_accepts_keyring_env ... ok
test storage::chunk_encryption::tests::parse_bool_env_rejects_invalid_values ... ok
test storage::chunk_encryption::tests::parse_keyring_entries_rejects_invalid_base64_entry ... ok
test storage::chunkstore::tests::delete_chunk_ignores_missing_file ... ok
test storage::chunkstore::tests::from_runtime_uses_loaded_config ... ok
test storage::chunkstore::tests::write_chunk_reports_encryption_failures ... ok
test storage::replication::tests::delete_chunk_everywhere_succeeds_for_remote_node ... ok
test storage::replication::tests::read_chunk_returns_ok_for_valid_local_replica ... ok
test storage::replication::tests::select_nodes_handles_zero_seed_and_offline_nodes ... ok
test storage::replication::tests::write_chunk_reports_metadata_insert_error ... ok
test test_support::guard_tests::fail_trigger_guard_create_and_remove_succeeds ... ok
test test_support::guard_tests::fail_trigger_guard_remove_reports_error_on_drop_function ... ok
test test_support::tests::broken_repo_returns_error_on_query ... ok
test util::config::tests::block_size_for_path_fails_for_missing_path ... ok
test util::config::tests::computed_chunk_size_respects_min_and_max ... ok
test util::config::tests::load_config_defaults_to_internal_auth_mode ... ok
test util::config::tests::load_config_parses_oauth2_and_saml2_modes_with_oidc_settings ... ok
test util::config::tests::load_config_rejects_invalid_base64 ... ok
test util::config::tests::load_config_rejects_wildcard_cors_in_non_dev ... ok
test util::config::tests::load_config_requires_postgres_dsn ... ok
test util::config::tests::parse_bool_variants ... ok
test util::crypto::tests::decrypt_rejects_wrong_key ... ok
test util::runtime::tests::mode_string_helpers_cover_all_variants ... ok
test util::storage_volume::tests::data_dirs_usage_handles_missing_paths ... ok
test util::usage::tests::handle_cli_flags_ignores_unrelated_args ... ok

test result: ok. 161 passed; 0 failed; 0 ignored; 0 measured; 805 filtered out; finished in 45.27s

