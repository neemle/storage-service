
running 161 tests
test api::admin::tests::admin_user_management_and_audit ... ok
test api::admin::tests::create_user_requires_token ... ok
test api::admin::tests::list_users_marks_admin ... ok
test api::admin::tests::me_reports_missing_token_and_repo_errors ... ok
test api::admin::tests::password_login_is_rejected_in_external_auth_modes ... ok
test api::admin::tests::update_user_noop_when_payload_empty ... ok
test api::admin_storage::tests::bucket_volume_handlers_map_storage_errors ... ok
test api::admin_storage::tests::create_backup_policy_handler_validates_external_targets ... ok
test api::admin_storage::tests::create_snapshot_maps_repo_insert_error ... ok
test api::admin_storage::tests::export_helpers_handle_invalid_values ... ok
test api::admin_storage::tests::normalize_backup_scope_value_accepts_slave_alias ... ok
test api::admin_storage::tests::restore_snapshot_maps_create_bucket_from_snapshot_error ... ok
test api::admin_storage::tests::snapshot_handlers_require_auth ... ok
test api::admin_storage::tests::update_bucket_worm_maps_update_query_error ... ok
test api::auth::tests::clear_session_cookie_resets_value ... ok
test api::auth::tests::session_cookie_sets_secure_flag ... ok
test api::console::tests::auth_config_reports_internal_mode ... ok
test api::console::tests::build_object_url_handles_empty_key_and_invalid_endpoint ... ok
test api::console::tests::create_access_key_reports_encryption_failure ... ok
test api::console::tests::ensure_oidc_user_handles_existing_and_create_paths ... ok
test api::console::tests::get_object_download_url_missing_host_for_private_bucket_reports_error ... ok
test api::console::tests::list_objects_defaults_and_bucket_name_noop ... ok
test api::console::tests::login_fails_for_unknown_user ... ok
test api::console::tests::me_and_list_access_keys_error_paths ... ok
test api::console::tests::oidc_callback_rejects_disabled_and_missing_config ... ok
test api::console::tests::password_helpers_map_internal_errors ... ok
test api::console::tests::resolve_s3_endpoint_prefers_public_url ... ok
test api::console::tests::resolve_signing_key_reports_create_access_key_error ... ok
test api::console::tests::update_bucket_renames_and_sets_public ... ok
test api::console::tests::update_object_rejects_blank_key ... ok
test api::internal::tests::chunk_handlers_cover_missing_checksum_and_failpoints ... ok
test api::internal::tests::internal_body_limit_uses_lower_bound_and_chunk_max ... ok
test api::internal::tests::join_cluster_reports_repo_errors ... ok
test api::internal::tests::replica_router_accepts_large_chunk_body ... ok
test api::master::tests::build_servers_starts_listeners ... ok
test api::master::tests::servers_run_all_waits_for_handles ... ok
test api::portal::tests::accepts_encoding_matches_case_insensitive_tokens ... ok
test api::portal::tests::content_type_for_known_extensions ... ok
test api::portal::tests::embedded_ui_returns_not_found_for_missing_asset ... ok
test api::portal::tests::encoding_allowed_rejects_mismatched_token ... ok
test api::portal::tests::router_builds_with_defaults ... ok
test api::replica::tests::build_servers_rejects_invalid_metrics_listen ... ok
test api::replica::tests::join_cluster_logs_mismatched_config ... ok
test api::replica::tests::metrics_handler_returns_payload ... ok
test api::replica::tests::server_handle_shutdown_handles_missing_sender ... ok
test api::replica::tests::sync_replica_mode_reports_request_error ... ok
test api::tests::app_state_new_reports_local_node_error ... ok
test api::tests::ensure_local_node_refreshes_capacity_on_reuse ... ok
test api::tests::refresh_node_heartbeat_metrics_clamps_future_heartbeat_to_zero ... ok
test api::volume_capacity::tests::binding_eligibility_accepts_master_and_volume_replica_only ... ok
test api::volume_capacity::tests::load_context_from_repo_supports_lookup_helpers ... ok
test auth::oidc::tests::authorization_url_reports_client_build_error_when_forced ... ok
test auth::oidc::tests::claim_string_list_reads_arrays ... ok
test auth::oidc::tests::exchange_code_reports_client_build_error_when_forced ... ok
test auth::oidc::tests::exchange_code_reports_request_payload_and_header_errors ... ok
test auth::oidc::tests::extract_identity_reads_claims ... ok
test auth::oidc::tests::select_jwk_with_matching_kid_returns_key ... ok
test auth::password::tests::hash_password_can_force_error_branch ... ok
test auth::token::tests::verify_rejects_expired_token ... ok
test backup::tests::backup_changed_since_and_prune_helpers_cover_remaining_paths ... ok
test backup::tests::build_signed_s3_put_creates_request_with_headers ... ok
test backup::tests::connection_helpers_cover_sftp_ssh_parse_and_http_client_failpoints ... ok
test backup::tests::external_target_upload_and_connection_paths_are_covered ... ok
test backup::tests::in_memory_writer_fail_modes_cover_tar_paths ... ok
test backup::tests::parse_external_targets_rejects_empty_name_sftp_and_ssh_scheme ... ok
test backup::tests::parse_s3_url_extracts_host_and_path ... ok
test backup::tests::prune_backup_run_reports_delete_errors_with_broken_repo ... ok
test backup::tests::resolve_target_url_rejects_invalid_endpoint ... ok
test backup::tests::run_backup_policy_once_reports_missing_backup_bucket ... ok
test backup::tests::sftp_timeout_error_mapper_returns_expected_message ... ok
test backup::tests::target_connectivity_sftp_kind_with_http_gateway_uses_http_probe ... ok
test backup::tests::test_s3_target_connection_success_returns_ok ... ok
test backup::tests::upload_http_target_reports_url_and_method_errors ... ok
test backup::tests::validate_kind_specific_fields_allows_sftp_ssh_other ... ok
test cache::tests::cache_store_memory_paths ... ok
test cache::tests::memory_cache_set_get_and_expire ... ok
test cache::tests::redis_failpoint_consumes_step ... ok
test events::tests::publish_with_failpoint_maps_publish_error_from_closed_channel ... ok
test jobs::tests::backup_scheduler_enabled_respects_mode_and_sub_mode ... ok
test jobs::tests::gc_once_returns_on_repo_error ... ok
test jobs::tests::repair_chunk_branches_cover_sources_and_mismatch ... ok
test jobs::tests::repair_chunk_reports_replica_query_error ... ok
test jobs::tests::repair_worker_step_handles_empty_queue ... ok
test jobs::tests::run_snapshot_policies_once_returns_on_repo_error ... ok
test jobs::tests::scrub_once_enqueues_missing_replica ... ok
test jobs::tests::snapshot_policy_change_check_handles_repo_errors ... ok
test meta::backup_repos::tests::bucket_change_and_snapshot_policy_paths_work ... ok
test meta::backup_repos::tests::create_bucket_from_snapshot_maps_version_insert_error ... ok
test meta::backup_repos::tests::replace_bucket_volume_bindings_reports_begin_error ... ok
test meta::db::tests::connect_logs_retry_warnings ... ok
test meta::db::tests::resolve_dsn_host_returns_original_when_lookup_empty ... ok
test meta::integration::tests::integration_helpers_cover_paths ... ok
test meta::migrate::tests::migration_directory_candidates_include_non_empty_env ... ok
test meta::migrate::tests::repair_and_retry_reports_release_lock_error ... ok
test meta::repos::tests::access_key_owner_scope ... ok
test meta::repos::tests::consume_join_token_commits_on_valid_and_missing ... ok
test meta::repos::tests::delete_all_object_versions_error_paths ... ok
test meta::repos::tests::delete_object_version_reports_latest_fetch_error ... ok
test meta::repos::tests::delete_object_version_reports_object_delete_error ... ok
test meta::repos::tests::finalize_object_version_reports_begin_error ... ok
test meta::repos::tests::multipart_cleanup_paths_minimal ... ok
test meta::repos::tests::upsert_multipart_part_reports_error ... ok
test obs::tests::metrics_layer_uses_fallback_path_without_matched_path ... ok
test s3::chunking::tests::drain_full_chunks_splits_buffer ... ok
test s3::sigv4::tests::authenticate_request_presigned_missing_access_key_returns_invalid ... ok
test s3::sigv4::tests::authenticate_request_rejects_invalid_amz_date ... ok
test s3::sigv4::tests::authenticate_request_reports_repo_error_for_header_auth ... ok
test s3::sigv4_core::tests::build_canonical_request_errors_when_headers_missing ... ok
test s3::sigv4_core::tests::canonical_query_presigned_excludes_signature ... ok
test s3::sigv4_core::tests::parse_amz_date_rejects_invalid ... ok
test s3::sigv4_core::tests::parse_authorization_honors_payload_hash_header ... ok
test s3::sigv4_core::tests::parse_presigned_extracts_fields ... ok
test s3::sigv4_core::tests::parse_presigned_rejects_missing_fields ... ok
test s3::sigv4_core::tests::presign_url_rejects_empty_region ... ok
test s3::tests::bucket_handlers_reject_inactive_user ... ok
test s3::tests::build_object_response_sets_headers_and_ranges ... ok
test s3::tests::complete_multipart_upload_reports_delete_other_versions_error ... ok
test s3::tests::delete_object_reports_repo_error ... ok
test s3::tests::detect_s3_operation_covers_bucket_location ... ok
test s3::tests::dispatch_treats_repo_error_as_missing_bucket ... ok
test s3::tests::get_and_head_object_version_error_paths ... ok
test s3::tests::handle_get_bucket_list_current_repo_error ... ok
test s3::tests::handle_get_bucket_versions_and_list_v2_cover_markers ... ok
test s3::tests::handle_object_rejects_other_user ... ok
test s3::tests::list_parts_error_paths_cover_branches ... ok
test s3::tests::notification_handlers_cover_event_paths ... ok
test s3::tests::parse_range_header_rejects_invalid_parts ... ok
test s3::tests::public_dispatch_rejects_private_bucket ... ok
test s3::tests::record_helpers_and_read_body_limits ... ok
test s3::tests::root_handler_reports_bucket_repo_error ... ok
test s3::tests::stream_body_to_chunks_reports_chunk_write_error_in_loop ... ok
test s3::tests::upload_part_failpoint_returns_error ... ok
test s3::xml::tests::list_buckets_escapes_values ... ok
test s3::xml::tests::parse_complete_parts_strips_quotes ... ok
test storage::checksum::tests::checksum_verify_sha256 ... ok
test storage::chunk_encryption::tests::decrypt_rejects_non_envelope_payload ... ok
test storage::chunk_encryption::tests::load_chunk_encryption_rejects_invalid_env_key_payloads ... ok
test storage::chunk_encryption::tests::parse_bool_env_uses_default_when_missing ... ok
test storage::chunk_encryption::tests::parse_keyring_entries_rejects_malformed_entry ... ok
test storage::chunkstore::tests::encrypted_payload_requires_encryption_for_reads ... ok
test storage::chunkstore::tests::read_chunk_failpoint_reports_error ... ok
test storage::chunkstore::tests::write_chunk_with_encryption_stores_envelope ... ok
test storage::replication::tests::delete_remote_chunk_reports_error_status ... ok
test storage::replication::tests::read_chunk_skips_unhealthy_and_reads_remote ... ok
test storage::replication::tests::server_handle_shutdown_handles_missing_sender ... ok
test storage::replication::tests::write_chunk_reports_quorum_failure ... ok
test test_support::guard_tests::fail_trigger_guard_create_deferred_and_remove_succeeds ... ok
test test_support::guard_tests::fail_trigger_guard_remove_reports_error_on_drop_trigger ... ok
test test_support::tests::env_guard_removes_unset_vars_on_drop ... ok
test util::config::tests::block_size_for_path_rejects_invalid_path ... ok
test util::config::tests::computed_chunk_size_uses_override ... ok
test util::config::tests::load_config_falls_back_to_admin_listen_and_ui_dir ... ok
test util::config::tests::load_config_parses_oidc_mode ... ok
test util::config::tests::load_config_rejects_invalid_jwt_signing_key ... ok
test util::config::tests::load_config_requires_data_dirs ... ok
test util::config::tests::load_config_requires_secret_key ... ok
test util::config::tests::validate_external_auth_config_rejects_missing_struct ... ok
test util::crypto::tests::encrypt_and_decrypt_roundtrip ... ok
test util::runtime::tests::only_delivery_mode_allows_client_reads ... ok
test util::storage_volume::tests::data_dirs_usage_ignores_nul_paths ... ok
test util::usage::tests::handle_cli_flags_recognizes_help ... ok

test result: ok. 161 passed; 0 failed; 0 ignored; 0 measured; 805 filtered out; finished in 72.65s

