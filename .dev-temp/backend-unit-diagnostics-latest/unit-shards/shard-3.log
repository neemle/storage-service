
running 161 tests
test api::admin::tests::admin_login_handles_repo_error_and_invalid_hash ... ok
test api::admin::tests::create_update_delete_user_flow ... ok
test api::admin::tests::list_nodes_reports_runtime_mode_lookup_error ... ok
test api::admin::tests::login_reports_invalid_hash_and_token_issue ... ok
test api::admin::tests::parse_audit_pagination_rejects_invalid_values ... ok
test api::admin::tests::session_cookie_can_be_used_for_auth ... ok
test api::admin_storage::tests::backup_policy_run_and_export_flow ... ok
test api::admin_storage::tests::create_backup_policy_defaults_external_targets_to_empty_array ... ok
test api::admin_storage::tests::create_backup_policy_rejects_non_backup_replica_mode ... ok
test api::admin_storage::tests::export_backup_run_maps_archive_errors ... ok
test api::admin_storage::tests::list_restore_and_policy_handlers_require_auth ... ok
test api::admin_storage::tests::resolve_export_format_uses_request_or_stored_format ... ok
test api::admin_storage::tests::run_backup_policy_maps_backup_execution_error ... ok
test api::admin_storage::tests::update_backup_policy_handler_requires_auth ... ok
test api::admin_storage::tests::upsert_snapshot_policy_maps_repo_write_error ... ok
test api::auth::tests::extract_token_reads_cookie_when_header_missing ... ok
test api::console::tests::access_key_update_delete_forbidden_for_other_user ... ok
test api::console::tests::bucket_and_object_error_paths ... ok
test api::console::tests::change_password_updates_credentials ... ok
test api::console::tests::ensure_and_create_oidc_user_report_internal_errors ... ok
test api::console::tests::get_object_detail_reports_repo_errors ... ok
test api::console::tests::list_buckets_includes_versioning_and_public_fields ... ok
test api::console::tests::load_active_claim_user_reports_repo_error ... ok
test api::console::tests::login_rejects_wrong_password ... ok
test api::console::tests::object_download_url_public_and_private ... ok
test api::console::tests::oidc_start_rejects_disabled_and_missing_config ... ok
test api::console::tests::register_login_failure_tracks_audit ... ok
test api::console::tests::resolve_signing_key_rejects_unowned_access_key ... ok
test api::console::tests::update_bucket_and_object_reject_worm_bucket ... ok
test api::console::tests::update_object_error_paths ... ok
test api::console::tests::validate_oidc_state_and_nonce_validates_expected_cookies ... ok
test api::internal::tests::heartbeat_reports_repo_error ... ok
test api::internal::tests::join_cluster_rejects_missing_token ... ok
test api::internal::tests::parse_range_header_variants ... ok
test api::master::tests::build_servers_rejects_invalid_listen ... ok
test api::master::tests::ready_handler_checks_dirs_and_db ... ok
test api::portal::tests::accepts_encoding_allows_token_with_unparseable_quality ... ok
test api::portal::tests::client_rejects_non_utf8_accept_encoding ... ok
test api::portal::tests::embedded_ui_rejects_parent_traversal ... ok
test api::portal::tests::embedded_ui_with_fixture_serves_precompressed_asset ... ok
test api::portal::tests::parse_quality_returns_none_for_unparseable_float ... ok
test api::replica::tests::build_servers_maps_invalid_s3_listen_without_join ... ok
test api::replica::tests::heartbeat_background_task_sends_request ... ok
test api::replica::tests::join_cluster_success ... ok
test api::replica::tests::ready_handler_detects_master_unreachable ... ok
test api::replica::tests::spawn_server_handles_bind_failure ... ok
test api::tests::app_state_new_reports_chunk_size_error ... ok
test api::tests::ensure_local_node_creates_replica_role ... ok
test api::tests::local_address_prefers_master_and_replica_defaults ... ok
test api::tests::refresh_node_heartbeat_metrics_skips_null_heartbeat_row ... ok
test api::volume_capacity::tests::helper_maps_keep_runtime_values ... ok
test auth::access_keys::tests::secret_access_key_is_base64_32_bytes ... ok
test auth::oidc::tests::claim_helpers_cover_string_scalar_and_non_object_paths ... ok
test auth::oidc::tests::exchange_code_forced_signature_skip_rejects_malformed_payload ... ok
test auth::oidc::tests::exchange_code_reports_missing_id_token ... ok
test auth::oidc::tests::exchange_code_without_kid_uses_single_jwk_then_fails_parse ... ok
test auth::oidc::tests::has_admin_group_matches_entries ... ok
test auth::oidc::tests::test_env_guard_restores_existing_value ... ok
test auth::token::tests::issue_and_verify_token ... ok
test backup::tests::archive_format_parsing_and_metadata ... ok
test backup::tests::build_s3_object_url_encodes_key_segments ... ok
test backup::tests::complete_backup_run_maps_retention_failure_with_failpoint ... ok
test backup::tests::execute_backup_run_marks_failed_when_archive_build_fails ... ok
test backup::tests::hmac_sha256_produces_32_byte_output ... ok
test backup::tests::parse_external_targets_accepts_valid_payload ... ok
test backup::tests::parse_external_targets_rejects_s3_without_required_credentials ... ok
test backup::tests::persist_backup_archive_maps_chunk_write_failpoint_error ... ok
test backup::tests::require_field_accepts_non_empty_and_rejects_blank ... ok
test backup::tests::run_backup_policy_once_maps_snapshot_and_run_create_errors ... ok
test backup::tests::schedule_due_checks_daily_weekly_monthly_and_unknown ... ok
test backup::tests::target_connectivity_and_upload_helpers_cover_branches ... ok
test backup::tests::test_s3_target_connection_reports_connectivity_error ... ok
test backup::tests::upload_external_targets_skips_disabled_and_rejects_direct_transports ... ok
test backup::tests::upload_s3_target_server_error_returns_err ... ok
test backup::tests::validates_backup_and_snapshot_enums ... ok
test cache::tests::memory_cache_default_matches_new ... ok
test cache::tests::redis_cache_invalid_url_errors ... ok
test events::tests::invalid_rabbit_url_errors ... ok
test events::tests::wait_publish_confirm_accepts_successful_confirmation ... ok
test jobs::tests::gc_once_cleans_orphan_records ... ok
test jobs::tests::refresh_capacity_once_updates_node_free_bytes ... ok
test jobs::tests::repair_chunk_reports_fetch_source_error ... ok
test jobs::tests::repair_queue_default_is_empty ... ok
test jobs::tests::run_backup_policies_once_skips_non_backup_replica_mode ... ok
test jobs::tests::scheduler_loops_tick_when_repo_is_broken ... ok
test jobs::tests::scrub_once_skips_when_chunk_healthy ... ok
test meta::backup_repos::tests::backup_policy_update_and_failure_paths_work ... ok
test meta::backup_repos::tests::create_bucket_from_snapshot_maps_manifest_link_error ... ok
test meta::backup_repos::tests::create_bucket_snapshot_maps_totals_update_error ... ok
test meta::backup_repos::tests::repo_methods_map_errors_with_unreachable_pool ... ok
test meta::db::tests::resolve_dsn_host_errors_on_unresolvable_host ... ok
test meta::db::tests::resolve_dsn_host_with_lookup_returns_original_on_parse_error ... ok
test meta::migrate::tests::is_auto_repair_enabled_accepts_yes_value ... ok
test meta::migrate::tests::repair_and_retry_reports_checksum_update_error ... ok
test meta::migrate::tests::run_migrations_returns_non_version_mismatch_errors ... ok
test meta::repos::tests::cleanup_multipart_upload_error_paths ... ok
test meta::repos::tests::consume_join_token_reports_update_error ... ok
test meta::repos::tests::delete_object_version_reports_commit_error ... ok
test meta::repos::tests::delete_object_version_reports_manifest_link_delete_error ... ok
test meta::repos::tests::ensure_admin_user_with_policy_reports_force_password_update_error ... ok
test meta::repos::tests::join_tokens_and_audit_logs ... ok
test meta::repos::tests::touch_access_key_usage_reports_error ... ok
test obs::tests::metrics_layer_records_http_request_with_matched_path ... ok
test policy::tests::access_rejects_inactive_user_or_other_owner ... ok
test s3::sigv4::tests::authenticate_request_accepts_encoded_path_for_presigned ... ok
test s3::sigv4::tests::authenticate_request_rejects_inactive_key_and_bad_secret ... ok
test s3::sigv4::tests::authenticate_request_rejects_time_skew_and_expired ... ok
test s3::sigv4::tests::authenticate_request_updates_access_key_usage ... ok
test s3::sigv4_core::tests::canonical_headers_errors_when_missing ... ok
test s3::sigv4_core::tests::encode_escapes_spaces ... ok
test s3::sigv4_core::tests::parse_authorization_defaults_payload_hash_when_header_invalid ... ok
test s3::sigv4_core::tests::parse_authorization_rejects_missing_signature ... ok
test s3::sigv4_core::tests::parse_presigned_rejects_missing_credential ... ok
test s3::sigv4_core::tests::presign_url_encodes_unicode_paths ... ok
test s3::tests::bucket_dispatch_and_handlers_cover_queries ... ok
test s3::tests::build_object_response_handles_missing_chunks_and_headers ... ok
test s3::tests::complete_multipart_upload_error_paths_cover_branches ... ok
test s3::tests::delete_object_reports_delete_all_versions_error ... ok
test s3::tests::delete_object_versioning_enabled_creates_delete_marker ... ok
test s3::tests::dispatch_reads_body_for_bucket_queries ... ok
test s3::tests::get_and_head_missing_key_return_no_such_key ... ok
test s3::tests::handle_delete_objects_executes_for_owner ... ok
test s3::tests::handle_get_bucket_notification_uses_default_xml ... ok
test s3::tests::handle_object_reads_body_for_complete_and_delete ... ok
test s3::tests::list_objects_all_handles_batches ... ok
test s3::tests::multipart_error_paths_cover_branches ... ok
test s3::tests::parse_range_header_accepts_valid_range ... ok
test s3::tests::path_handler_rejects_private_request_without_auth ... ok
test s3::tests::put_object_reports_finalize_error ... ok
test s3::tests::root_and_path_handlers_cover_public_and_invalid ... ok
test s3::tests::state_with_events_enabled_uses_default_url_when_env_missing ... ok
test s3::tests::stream_body_to_chunks_splits_and_flushes_tail ... ok
test s3::xml::tests::bucket_location_and_list_objects_emit_xml ... ok
test s3::xml::tests::list_objects_v2_omits_optional_fields ... ok
test storage::checksum::tests::checksum_verify_both ... ok
test storage::chunk_encryption::tests::chunk_encryption_requires_active_key ... ok
test storage::chunk_encryption::tests::env_guard_restores_existing_value ... ok
test storage::chunk_encryption::tests::load_chunk_encryption_uses_key_base64 ... ok
test storage::chunk_encryption::tests::parse_keyring_entries_rejects_empty_and_invalid_key_rows ... ok
test storage::chunkstore::tests::delete_chunk_failpoint_reports_error ... ok
test storage::chunkstore::tests::from_runtime_reports_invalid_encryption_flag ... ok
test storage::chunkstore::tests::write_chunk_failpoints_report_errors ... ok
test storage::replication::tests::delete_chunk_everywhere_reports_repo_error ... ok
test storage::replication::tests::read_chunk_reports_repo_error ... ok
test storage::replication::tests::remote_put_get_delete_paths ... ok
test storage::replication::tests::write_chunk_hits_remote_nodes ... ok
test storage::replication::tests::write_chunk_succeeds_with_zero_quorum ... ok
test test_support::guard_tests::fail_trigger_guard_create_reports_error_on_trigger ... ok
test test_support::tests::base_config_and_build_state_work ... ok
test test_support::tests::table_rename_guard_roundtrip ... ok
test util::config::tests::computed_chunk_size_errors_without_data_dir ... ok
test util::config::tests::load_config_defaults_for_invalid_optional_values ... ok
test util::config::tests::load_config_maps_slave_mode_to_replica_and_sub_mode ... ok
test util::config::tests::load_config_rejects_invalid_auth_mode ... ok
test util::config::tests::load_config_rejects_oidc_without_admin_groups ... ok
test util::config::tests::load_config_requires_oidc_values_when_mode_is_oidc ... ok
test util::config::tests::normalize_listen_addr_handles_colon_prefix ... ok
test util::crypto::tests::decrypt_rejects_short_ciphertext ... ok
test util::http::tests::verify_headers_rejects_missing_or_mismatch ... ok
test util::shutdown::tests::shutdown_signal_handles_sigterm ... ok
test util::usage::tests::handle_cli_flags_executes_runtime_wrapper ... ok

test result: ok. 161 passed; 0 failed; 0 ignored; 0 measured; 805 filtered out; finished in 104.41s

